{"version":3,"sources":["../../src/components/searchBox.js"],"names":[],"mappings":"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","file":"searchBox.js","sourcesContent":["import React from 'react';\nimport ReactDom from 'react-dom';\n\nclass SearchBox extends React.Component {\n    constructor(props) {\n        super(props);\n        this.displayName = 'SearchBox';\n        this.state = {\n        \tsearchBox : null,\n        \tinternalPosition : -1\n        }\n        this.postRender = this.postRender.bind(this);\n        this.preRender = this.preRender.bind(this);\n    }\n    componentDidMount() {\n   \t this.postRender();\n    }\n    postRender() {\n    \tvar {map, maps, position} = this.props;\n    \tif(map && maps) {\n\t    \tvar input = ReactDom.findDOMNode(this.refs.input);\n\t    \tvar container = ReactDom.findDOMNode(this.refs.child);\n\t    \tvar searchBox = new maps.places.SearchBox(input);\n\t    \t\n\n\n\t    \tmap.addListener('bounds_changed', () => {\n\t            searchBox.setBounds(map.getBounds());\n\t\t    });\n\n\t\t\tsearchBox.addListener('places_changed', () => {\n               if(typeof this.props.onPlacesChanged === 'function')\n\t               this.props.onPlacesChanged(searchBox.getPlaces());\n            });\n\n\t    \tif(!position)\n\t    \t\tposition = \"TOP_LEFT\";\n\n\t    \tif(this.state.internalPosition < 0)\n\t\t\t\tmap.controls[maps.ControlPosition[position]].push(container);\n\t\t\telse\n\t\t\t\tmap.controls[maps.ControlPosition[position]].insertAt(this.state.internalPosition, container);\n\n\t\t\tvar internalPosition = map.controls[maps.ControlPosition[position]].length-1;\n\n\t\t\tif(this.state.internalPosition != internalPosition)\n\t\t\t\tthis.setState({\n\t\t\t\t\tinternalPosition\n\t\t\t\t});\n    \t}\n    \telse\n    \t\tconsole.warn(new Error(\"You must pass this component as a control to a Map component.\"))\n    }\n    preRender() {\n    \tvar {map, maps, position} = this.props;\n    \tvar {internalPosition} = this.state;\n\t\tmap.controls[maps.ControlPosition[position]].removeAt(internalPosition);\n\n\t\tvar child = ReactDom.findDOMNode(this.refs.child);\n\t\tvar parent = ReactDom.findDOMNode(this.refs.parent);\n\t\tparent.appendChild(child);\n    }\n    componentWillUpdate() {\n    \tif(this.state.internalPosition > -1)\n\t    \tthis.preRender();\n    }\n    shouldComponentUpdate(nextProps, nextState) {\n    \treturn false;\n    }\n    componentDidUpdate(prevProps, prevState) {\n    \tif(this.state.internalPosition > -1 && prevState.internalPosition != -1)\n\t    \tthis.postRender();\n    }\n    componentWillUnmount() {\n   \t \tthis.preRender();\n    }\n    render() {\n    \tvar Wrapper = this.props.wrapper;\n    \tif(Wrapper)\n    \t\treturn <div ref=\"parent\"><div ref=\"child\"><Wrapper><input type=\"text\" ref=\"input\" placeholder={this.props.placeholder} style={this.props.style} className={this.props.className} /></Wrapper></div></div>\n    \telse\n\t        return <div ref=\"parent\"><div ref=\"child\"><input type=\"text\" ref=\"input\" placeholder={this.props.placeholder} style={this.props.style} className={this.props.className} /></div></div>;\n    }\n}\n\nSearchBox.PropTypes = {\n    placeholder : React.PropTypes.string,\n\tposition : React.PropTypes.string.isRequired,\n\twrapper : React.PropTypes.func,\n\tonPlacesChanged : React.PropTypes.func.isRequired\n}\n\nexport default SearchBox;\n"]}