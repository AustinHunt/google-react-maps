{"version":3,"sources":["../../src/components/marker.js"],"names":[],"mappings":"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","file":"marker.js","sourcesContent":["import React from 'react';\n\n/**\n* The component designed to implement the google.maps.Marker from the javascript api. <Marker /> components live within the context of any <Map /> component.\n* @memberof Map\n* @property {object} state\n* @property {google.maps.Marker} state.Marker\n* @property {object} props\n* @property {google.maps.Map} props.map\n* @property {google.maps} props.maps\n* @property {object} props.coords Defines the coordinate pair where this marker should exits.\n* @property {number} props.coords.lng Number defining longitude.\n* @property {number} props.coords.lat Number defining latitude.\n* @property {string|Icon} props.icon\n* @property {google.maps.MarkerOptions} props.options See [Marker Options Documentation]{@link https://developers.google.com/maps/documentation/javascript/3.exp/reference#MarkerOptions}\n*/\nclass Marker extends React.Component {\n    constructor(props) {\n        super(props);\n        this.displayName = 'Marker';\n        this.state = {\n        \tmarker : null\n        }\n\n        this.getOptions = this.getOptions.bind(this);\n    }\n    componentWillMount() {\n    \tif(this.props.map && this.props.maps) {\n    \t\tvar {map,maps, MarkerClusterer} = this.props;\n\n    \t\tvar marker = new maps.Marker(this.getOptions());\n\n    \t\tmarker.setMap(this.props.map);\n\n    \t\tthis.setState({marker});\n\n    \t\tif(MarkerClusterer)\n    \t\t\tMarkerClusterer.addMarker(marker);\n\n    \t\tif(typeof this.props.onClick === 'function')\n\t    \t\tthis.props.maps.event.addListener(marker, 'click', e => {\n\t    \t\t\tif(this.props.onClick)\n\t    \t\t\t\tthis.props.onClick({coords : marker.getPosition().toJSON()})\n\t    \t\t});\n        if(typeof this.props.onDragEnd === 'function')\n          this.props.maps.event.addListener(marker, 'dragend', e=> {\n            this.props.onDragEnd(e.latLng.toJSON(), e);\n          })\n    \t}\n    \telse {\n    \t\t// Whoah boy! We need a map bigly.\n    \t\tconsole.error(new Error(\"<Marker /> components must be instantiated within a Map component. Please check your component's context.\"))\n    \t}\n    }\n    componentWillUpdate() {\n\n    }\n    getOptions() {\n\t\tvar options = {\n\t\t\tposition : this.props.coords,\n\t\t\t// map : this.props.map,\n\t\t\ticon : this.props.icon ? this.props.icon : undefined\n\t\t}\n\t\tif(this.props.options)\n\t\t\toptions = Object.assign(options, this.props.options);\n    \treturn options;\n    }\n    componentWillUnmount() {\n\t\tif(this.state.marker) {\n\t\t\tthis.state.marker.setMap(null);\n\t\t}\n\t\tthis.setState({marker : null});\n\n    }\n    componentDidUpdate(prevProps, prevState) {\n    \tif(this.state.marker) {\n    \t\tthis.state.marker.setOptions(this.getOptions())\n\n            if(this.props.MarkerClusterer)\n                this.props.MarkerClusterer.addMarker(this.state.marker);\n    \t}\n    }\n    render() {\n    \tvar children = [];\n    \tif(this.props.children)\n    \t\tchildren = React.Children.map(this.props.children, child => React.cloneElement(child, {\n    \t\t\tmap : this.props.map,\n    \t\t\tmaps : this.props.maps,\n    \t\t\tanchor : this.state.marker\n    \t\t}));\n        return <div>{children}</div>;\n    }\n}\n\nMarker.propTypes = {\n\tmaps : React.PropTypes.object,\n\tmap : React.PropTypes.object,\n\tMarkerClusterer : React.PropTypes.object,\n\toptions : React.PropTypes.object,\n\tanchor : React.PropTypes.object,\n\tcoords : React.PropTypes.shape({\n\t\tlng : React.PropTypes.number,\n\t\tlat : React.PropTypes.number\n\t})\n}\n\nexport default Marker;\n"]}