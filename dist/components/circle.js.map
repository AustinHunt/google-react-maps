{"version":3,"sources":["../../src/components/circle.js"],"names":[],"mappings":"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","file":"circle.js","sourcesContent":["import React from 'react';\nimport {mapChildren} from '../utils/utils';\n/** Defines a circle shape in the map. Relates to google.maps.Circle class.\n* @property {object} props\n* @property {number} props.radius\n* @property {object} props.center\n* @property {number} props.center.lat\n* @property {number} props.center.lng\n* @property {function} props.onRadiusChange\n* @property {function} props.onCenterChange\n\n*/\nclass Circle extends React.Component {\n    constructor(props) {\n        super(props);\n        this.displayName = 'Circle';\n        this.setupListeners = this.setupListeners.bind(this);\n        this.state = {circle : null};\n\n        this.focus = this.focus.bind(this);\n    }\n    /** Focus the map on this circle. */\n    focus() {\n    \tvar {circle} = this.state;\n    \tvar {map} = this.state;\n    \tif(circle && map) {\n    \t\tmap.fitBounds(circle.getBounds());\n    \t}\n    }\n    /** Setup the listeners for this circle */\n    setupListeners() {\n\n    \tvar {circle} = this.state;\n    \tvar {maps, map} = this.props;\n    \tif(maps && circle) {\n    \t\tmaps.event.addListener(circle, 'radius_changed',e => {\n    \t\t\tif(typeof this.props.onRadiusChange === 'function')\n    \t\t\t\tthis.props.onRadiusChange(circle.getRadius());\n    \t\t});\n    \t\tmaps.event.addListener(circle, 'center_changed', e => {\n    \t\t\tif(typeof this.props.onCenterChange === 'function')\n    \t\t\t\tthis.props.onCenterChange(circle.getCenter().toJSON());\n    \t\t});\n    \t\tmaps.event.addListener(circle, 'click', e => {\n    \t\t\tif(typeof this.props.onClick === 'function')\n    \t\t\t\tthis.props.onClick(Object.assign({coords : circle.getCenter().toJSON()},e));\n    \t\t});\n    \t\tmaps.event.addListener(circle, 'rightclick', ({latLng}) =>\n    \t\t\ttypeof this.props.onRightClick === 'function' ? this.props.onRightClick({coords:latLng.toJSON()}) : f => f);\n    \t}\n    \telse\n    \t\tconsole.error(new Error(\"You must pass maps and map to this component. Otherwise, run it inside a map component.\"));\n    }\n    componentDidUpdate(prevProps, prevState) {\n    \tvar currCenter = new this.props.maps.LatLng(this.props.center);\n    \tvar prevCenter = this.state.circle.getCenter();\n\n    \tif(!currCenter.equals(prevCenter))\n    \t\tthis.state.circle.setCenter(currCenter);\n\n    \tif(this.props.radius != this.state.circle.getRadius())\n    \t\tthis.state.circle.setRadius(this.props.radius);\n    }\n    componentWillMount() {\n    \tvar {\n    \t\tmap,\n    \t\tmaps,\n    \t} = this.props;\n\n    \tif(map && maps) {\n    \t\tvar CircleOptions = Object.assign({}, this.props, {maps : undefined});\n    \t\tvar circle = new maps.Circle(CircleOptions);\n    \t\tthis.setState({circle}, this.setupListeners);\n    \t}\n    }\n    componentWillUnmount() {\n       if(this.state.circle) {\n            this.props.maps.event.clearListeners(this.state.circle);\n       \t\tthis.state.circle.setMap(null);\n       }\n    }\n    render() {\n    \tvar children = [];\n    \tif(this.props.children && this.props.maps && this.props.map)\n    \t\tchildren = mapChildren({\n    \t\t\tcoords : this.state.circle.getCenter().toJSON()\n    \t\t}, this);\n        return <div>{children}</div>;\n    }\n}\n\nvar {number, shape} = React.PropTypes;\n\nCircle.propTypes = {\n\tradius : number.isRequired,\n\tcenter : shape({\n\t\tlat : number,\n\t\tlng : number\n\t}).isRequired\n}\nexport default Circle;\n"]}